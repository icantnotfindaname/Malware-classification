import array
import numpy as np
from PIL import Image

def img_b2m(file, file_length, ist_b2med):
    remainder = file_length % ist_b2med.width
    arr = array.array("B")
    arr.fromfile(file, file_length - remainder)
    file.close()
    height = int(len(arr) / ist_b2med.width)
    img = np.reshape(arr, (height, ist_b2med.width))
    img_b2med = Image.fromarray(img)
    return img_b2med


def choose_width_by_length(file_length):
    width = 0
    if file_length < 10000:
        width = 32
    elif file_length < 30000:
        width = 64
    elif file_length < 60000:
        width = 128
    elif file_length < 100000:
        width = 256
    elif file_length < 200000:
        width = 384
    elif file_length < 500000:
        width = 512
    elif file_length < 1000000:
        width = 768
    else:
        width = 1024
    return width
